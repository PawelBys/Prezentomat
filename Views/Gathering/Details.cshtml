@model Prezentomat.Models.GatheringClass

@{
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
    var wplaty = ViewBag.wplaty;
    var size = ViewBag.size;
    var gathering_id = ViewBag.gathering_id;
    var creator = ViewBag.creator;
    var wallet = ViewBag.wallet;
    var in_out = ViewBag.in_out;
    var errorMessage = ViewBag.ErrorMessage;
    var procent = ViewBag.procent;
    var procent1 = ViewBag.procent1;
}

<!DOCTYPE html>


<head>

    <link rel="stylesheet" href="~/Content/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/Features-Clean.css" />
    <link rel="stylesheet" href="~/css/font-awesome.min.css" />
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Czesc', 'Kwota'],
          ['Wplacone',     @procent],
            ['Niewpłacone',      @procent1]
        ]);

        var options = {
            is3D: false,
            width: 310,
            height: 260,
            backgroundColor: 'none',
            slices: {
                0: { color: 'purple' },
                1: { color: 'transparent' }
            },
            legend:'none'
            
            
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
        chart.draw(data, options);
      }
    </script>
</head>
<main>
    
        <section class="features-clean">
            <div class="container">
                <div class="intro">
                    <h2 class="text-center">@Html.DisplayFor(model => model.gathering_name)</h2>
                    <p class="text-center">@Html.DisplayFor(model => model.gathering_description)</p>
                </div>
                <div class="row features">

                    <div class="col-sm-6 col-lg-4 item">
                        <i class="fa fa-euro icon"></i>
                        <h3 class="name">Oczekiwana kwota</h3>
                        <p class="description">@Html.DisplayFor(model => model.target_amount)</p>
                    </div>

                    <div class="col-sm-6 col-lg-4 item">
                        <i class="fa fa-calendar-times-o icon"></i>
                        <h3 class="name">Data końca zbiórki</h3>
                        <p class="description">@Html.DisplayFor(model => model.finish_date)</p>
                    </div>



                    @if (creator)
                    {
                        <div class="col-sm-6 col-lg-4 item">
                            <i class="fa fa-user-plus icon"></i>
                            <h3 class="name">Dodaj/Usuń użytkownika</h3>
                            <p class="description"></p>
                            @Html.ActionLink("Dodaj/Usuń", "AddUser", new { id = gathering_id }, new { @type = "number", @class = "btn btn-primary", @min = "0", @Value = "0", Style = "width:100%;border:1px solid;border-radius:15px;color: white;text-decoration:none;" })
                        </div>

                        <div class="col-sm-6 col-lg-4 item">
                            <i class="fa fa-user-plus icon"></i>
                            <h3 class="name">Edytuj szczegóły</h3>
                            <p class="description"></p>
                            @Html.ActionLink("Edytuj", "Edit", new { id = gathering_id }, new { @type = "number", @class = "btn btn-primary", @min = "0", @Value = "0", Style = "width:100%;border:1px solid;border-radius:15px;color: white;text-decoration:none;" })
                        </div>
                    }

                    <div class="col-sm-6 col-lg-4 item">
                        <i class="fa fa-list-ul icon"></i>
                        <h3 class="name">Wpłaty</h3>
                        <ul>
                            @for (int i = 0; i < size; i++)
                            {
                                <li>@wplaty[i]</li>
                            }

                        </ul>
                    </div>

                    @using (Html.BeginForm())
                    {
                        @Html.AntiForgeryToken()
                        <div class="col-sm-6 col-lg-4 item">
                            <i class="fa fa-line-chart icon"></i>
                            <h3 class="name">Dokonaj wpłaty/wypłaty na zbiórke</h3>
                            <p class="description"> Możesz wypłacić tylko pieniądze, które sam wpłaciłeś na zbiórkę. @errorMessage</p>
                            @Html.TextBoxFor(m => wallet, new { @type = "number", @class = "span4", @min = "0", @Value = "0", Style = "background: none; border:1px solid black; color: white;" })<br /><br>
                            Wpłać @Html.RadioButtonFor(m => in_out, "Wpłać")
                            &nbspWypłać @Html.RadioButtonFor(m => in_out, "Wypłać")<br />
                            <input class="btn btn-primary" type="submit" value="Wpłać/Wypłać" style="width:100%;border:1px solid;border-radius:15px;">
                        </div>
                    }

                    <div class="col-sm-6 col-lg-4 item">
                        <i class="fa fa-pie-chart icon"></i>
                        <h3 class="name">Zebrana kwota</h3>
                        <p class="description">
                            <div id="piechart_3d" style="width: 310px; height: 260px;"></div>

                    </div>


                </div>
            </div>
        </section>
        <script src="~/Scripts/jquery-3.4.1.min.js"
        <script src="~/Scripts/bootstrap.min.js"
    
  </main>  

